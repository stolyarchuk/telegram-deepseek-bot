
## Настройка переменной окружения `MCP_CONF_PATH` для MCP-серверов (Go-бинарник)

Это руководство объясняет, как настроить переменную окружения **`MCP_CONF_PATH`** при использовании Go-бинарника проекта **`telegram-deepseek-bot`** для работы с пользовательской конфигурацией MCP-серверов.

### 1. Создание конфигурационного файла MCP

Сначала создайте JSON-файл с настройками ваших MCP-серверов. Пример конфигурации ниже включает серверы для GitHub, Playwright, Amap (amap-mcp-server) и Amap Maps (amap-maps). Вы можете адаптировать его под свои нужды.

```json
{
  "mcpServers": {
    "github": {
      "command": "docker",
      "description": "Выполняет Git-операции и интеграцию с GitHub для управления репозиториями, pull-запросами, issues и workflows.",
      "args": [
        "run",
        "-i",
        "--rm",
        "-e",
        "GITHUB_PERSONAL_ACCESS_TOKEN",
        "ghcr.io/github/github-mcp-server"
      ],
      "env": {
        "GITHUB_PERSONAL_ACCESS_TOKEN": "<ВАШ_ТОКЕН>"
      }
    },
    "playwright": {
      "description": "Эмулирует поведение браузера для навигации, парсинга данных и автоматизированного взаимодействия с веб-страницами.",
      "url": "http://localhost:8931/sse"
    },
    "amap-mcp-server": {
      "description": "Предоставляет геосервисы: поиск локаций, построение маршрутов и навигацию.",
      "url": "http://localhost:8000/mcp"
    },
    "amap-maps": {
      "command": "npx",
      "description": "Обеспечивает геосервисы: поиск мест, маршрутизацию и навигацию.",
      "args": [
        "-y",
        "@amap/amap-maps-mcp-server"
      ],
      "env": {
        "AMAP_MAPS_API_KEY": "<ВАШ_ТОКЕН>"
      }
    }
  }
}
```

**Важно:**
* Замените **`<ВАШ_ТОКЕН>`** на реальные ключи доступа для GitHub и Amap.
* Поля **`url`** для серверов **`amap-mcp-server`** и **`playwright`** указывают на локальные сервисы. Убедитесь, что они запущены.
* Вы можете добавлять или удалять конфигурации серверов по необходимости.

Сохраните файл (например, как **`mcp_config.json`**) в удобную директорию (например, в корень проекта).

### 2. Установка переменной окружения `MCP_CONF_PATH`

Для Go-бинарника переменная окружения должна быть установлена **перед** запуском программы.

#### Способ 1: Временная установка через командную строку

Для тестирования можно временно задать переменную прямо в терминале:

**Linux/macOS:**
```bash
export MCP_CONF_PATH=/путь/к/вашему/mcp_config.json
./telegram-deepseek-bot  # Ваш Go-бинарник
```

#### Способ 2: Настройка в Docker (если используете)

Для Docker-развертывания задайте переменную в `Dockerfile`:

**В `Dockerfile`:**
```dockerfile
# ... остальные инструкции ...

COPY mcp_config.json /app/mcp_config.json

ENV MCP_CONF_PATH=/app/mcp_config.json

# ... остальные инструкции ...
```

### 3. Запуск Go-бинарника telegram-deepseek-bot

После настройки переменной запустите бинарник как обычно:

```bash
./telegram-deepseek-bot
```

Теперь бот сможет взаимодействовать с вашими MCP-серверами согласно конфигурации.

---

### Дополнительные примечания:
1. Для продакшен-среды используйте защищенные способы хранения токенов (например, Docker Secrets или vault).
2. При изменении конфигурации перезапустите бинарник.
3. Для проверки доступности серверов используйте команды `curl` или Postman.